// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id Int @default(autoincrement()) @id
  oauthId String @map("oauth_id")
  nickname String
  profileUrl String @map("profile_url")
  createdAt DateTime @map("created_at") @default(now())
  updatedAt DateTime @map("updated_at") @updatedAt 

  @@map("user")
}

model BoardGame {
  id  Int @default(autoincrement()) @id
  name String
  description String
  imageUrl String @map("image_url")
  designer String
  difficulty Int
  personnel String
  recommendPersonnel String @map("recommend_personnel")
  playTime Int // 분 단위
  age Int // 10 => 10세 이상
  genres BoardGameGenre[]
  grades BoardGameGrade[]
  replies BoardGameReply[]
  createdAt DateTime @map("created_at") @default(now())
  updatedAt DateTime @map("updated_at") @updatedAt 

  @@map("board_game")
}

model BoardGameGenre {
  id Int @default(autoincrement()) @id
  boardGame BoardGame @relation(fields: [boardGameId], references: [id])
  boardGameId Int @map("board_game_id")
  genre Genre @relation(fields: [genreId], references: [id])
  genreId Int @map("genre_id")
  createdAt DateTime @map("created_at") @default(now())
  updatedAt DateTime @map("updated_at") @updatedAt 

  @@map("board_game_genre")
}

model Genre {
  id Int @default(autoincrement()) @id
  code String // STRATEGY, ABSTRACT, WITS, BATTLE, REASONING, CARD, TILE, THEME
  name String // 전략, 추상, 순발력, 전투, 추리, 카드게임, 타일, 테마
  boardGameGeneres BoardGameGenre[]
  createdAt DateTime @map("created_at") @default(now())
  updatedAt DateTime @map("updated_at") @updatedAt 

  @@map("genre")
}

model BoardGameGrade {
  id Int @default(autoincrement()) @id
  grade Int
  userId Int @map("user_id")
  boardGame BoardGame @relation(fields: [boardGameId], references: [id])
  boardGameId Int @map("board_game_id")
  createdAt DateTime @map("created_at") @default(now())
  updatedAt DateTime @map("updated_at") @updatedAt

  @@map("board_game_grade")
}

model BoardGameReply {
  id Int @default(autoincrement()) @id
  content String
  boardGame BoardGame @relation(fields: [boardGameId], references: [id])
  boardGameId Int @map("board_game_id")
  createdAt DateTime @map("created_at") @default(now())
  updatedAt DateTime @map("updated_at") @updatedAt

  @@map("board_game_reply")
}